<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<title>Confirm Order</title>
<meta charset="utf-8" name="viewport" content="width=device-width">
<link rel="stylesheet" type="text/css" th:href="style.css" />
<link rel="stylesheet" th:href="@{/webjars/mdui/dist/css/mdui.css}">

<script th:src="@{/webjars/jquery/jquery.min.js}"></script>
<script th:src="@{/webjars/mdui/dist/js/mdui.js}"></script>
<script type="text/javascript" th:src="order.js"></script>
</head>
<body class="mdui-theme-primary-indigo mdui-theme-accent-pink">

	<h1>Please Confirm Below Informations </h1>
	<br/>
	<h2>Order Drugs</h2>
	<table id="ack-order-table">
		<tr>
			<th>Active Ingredient(s)</th>
			<th>Dosage Form</th>
			<th>Strength(s)</th>
			<th>Quantity</th>
			<th>Unit Price</th>
		</tr>
		<!-- <tr class="odd">
			<td class="product-title">enzylpenicillin Sodium</td>
			<td class="Strength">2,500 international units/mL</td>
			<td class="Strength">4 mg/mL</td>
			<td>1</td>
			<td class="price-per-pallet">$<span>5</span></td>
		</tr>
		<tr class="even">
			<td class="product-title">enzylpenicillin Sodium</td>
			<td class="Strength">2,500 international units/mL</td>
			<td class="Strength">4 mg/mL</td>
			<td>1</td>
			<td class="price-per-pallet">$<span>5</span></td>
		</tr>
		<tr class="odd">
			<td class="product-title">enzylpenicillin Sodium</td>
			<td class="Strength">2,500 international units/mL</td>
			<td class="Strength">4 mg/mL</td>
			<td>1</td>
			<td class="price-per-pallet">$<span>5</span></td>
		</tr>
		<tr class="even">
			<td class="product-title">enzylpenicillin Sodium</td>
			<td class="Strength">2,500 international units/mL</td>
			<td class="Strength">4 mg/mL</td>
			<td>1</td>
			<td class="price-per-pallet">$<span>5</span></td>
		</tr>
		<tr class="odd">
			<td class="product-title">enzylpenicillin Sodium</td>
			<td class="Strength">2,500 international units/mL</td>
			<td class="Strength">4 mg/mL</td>
			<td>1</td>
			<td class="price-per-pallet">$<span>5</span></td>
		</tr>
		<tr class="even">
			<td class="product-title">enzylpenicillin Sodium</td>
			<td class="Strength">2,500 international units/mL</td>
			<td class="Strength">4 mg/mL</td>
			<td>1</td>
			<td class="price-per-pallet">$<span>5</span></td>
		</tr> -->
	</table>
	<br/>
	<h2>Shipping Address</h2>
	<table id="order-table">
		<tr>
			<td width="8%">Address:</td>
			<td>No.1 Hougang St 91</td>
		</tr>
		<tr>
			<td></td>
			<td>Village Residence Hougang #06-04</td>
		</tr>
		<tr>
			<td></td>
			<td>Singapore 538692</td>
		</tr>
		<tr>
			<td>Tel :</td>
			<td>(65) 6875 2712</td>
		</tr>
	</table>
	<br/>
	<h2>Delivery Methods</h2>
	<input type="radio" name="delivery" value="Delivery Service" checked onchange="setDTime(1)">Delivery Service</input>
	&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	<input type="radio" name="delivery" value="Self-collection"onchange="setDTime(0)">Self-collection</input>
	<br/><br/>
	<div id="D_Time">
		<h2>Delivery Time</h2>
		<select>
			<option>All Day</option>
			<option>9:00AM - 11:59AM</option>
			<option>12:00PM - 18:59PM</option>
			<option>19:00PM - 21:00PM</option>
		</select>
	</div>

	<br/>
	<table id="confirm-table">	
		<tr>
			<td class="product-title">
				<button class="mdui-btn mdui-color-theme-accent mdui-ripple" onclick="submit()">Confirmed And Payment</button>
			</td>
		</tr>
	</table>
<style>
* {
	margin: 0;
	padding: 0;
}

body {
	font: 12px "Lucida Grande", Helvetica, Sans-Serif;
	padding: 50px;
}

table {
	border-collapse: collapse;
}

h1 {
	font: bold 30px Helvetica;
	letter-spacing: -2px;
	margin: 0 0 3px 0;
}

.clear {
	clear: both;
}

/* order-table */
#order-table {
	width: 100%;
}

#order-table td {
	padding: 5px;
}

#order-table th {
	padding: 5px;
	background: black;
	color: white;
	text-align: left;
}

#order-table td.row-total {
	text-align: right;
}

#order-table td input {
	width: 75px;
	text-align: center;
}

#order-table tr.even td {
	background: #eee;
}

#order-table td .total-box, .total-box {
	border: 3px solid green;
	width: 70px;
	padding: 3px;
	margin: 5px 0 5px 0;
	text-align: center;
	font-size: 14px;
}

/*ack-order-table */
#ack-order-table {
	width: 100%;
}

#ack-order-table td {
	padding: 5px;
}

#ack-order-table th {
	padding: 5px;
	background: black;
	color: white;
	text-align: left;
}

#ack-order-table td.row-total {
	text-align: right;
}

#ack-order-table td input {
	width: 75px;
	text-align: center;
}

#ack-order-table tr.even td {
	background: #eee;
}

#ack-order-table td .total-box, .total-box {
	border: 3px solid green;
	width: 70px;
	padding: 3px;
	margin: 5px 0 5px 0;
	text-align: center;
	font-size: 14px;
}

#shipping-subtotal {
	margin: 0;
}

#shipping-table {
	width: 350px;
	float: right;
}

#confirm-table {
	width: 100px;
	float: right;
}


#shipping-table td {
	padding: 5px;
}

#shipping-table th {
	padding: 5px;
	background: black;
	color: white;
	text-align: left;
}

#shipping-table td input {
	width: 69px;
	text-align: center;
}

#order-total {
	font-weight: bold;
	font-size: 21px;
	width: 110px;
}
</style>
<script th:inline="javascript">
		$(document).ready(
				function()
				{
					var arrStr = document.cookie.split("; ");
					var numTotalAMObjPlus = 0;
					for (var i = 0; i < arrStr.length; i++)
					{
				        var temp = arrStr[i].split("=");
				        //alert("temp---->"+temp)
				        if (temp[0] == "TABLE_VALUES")
				        {
				        	var x1 = unescape(temp[1]);
				        	var allRowDT=x1.split("|");
				        	//alert("x1--->"+x1);
				        	//alert("allRowDT--->"+allRowDT);
				        	//alert("allRowDT length--->"+allRowDT.length);
				        	var numTotalAMObjPlusIndex=0;
				        	for(var j=0; j<allRowDT.length; j++)
				        	{
				        		if(!($.isEmptyObject(allRowDT[j])))
				        		{
				        			//alert("j---->"+j);
				        			var oneRowDT = allRowDT[j];
				        			var allTDInOneRow = oneRowDT.split("[]");
				        			for(var h=0; h<allTDInOneRow.length; h++)
				        			{
				        				var oneTDDT = allTDInOneRow[h];
				        				//alert("oneTDDT--->"+oneTDDT);
				        			}
				        			/*
				        			<td class="product-title">enzylpenicillin Sodium</td>
				        			<td class="Strength">2,500 international units/mL</td>
				        			<td class="Strength">4 mg/mL</td>
				        			<td>1</td>
				        			<td class="price-per-pallet">$<span>5</span></td>
				        			*/
				        			var td0;
				        			//alert("lenght--->"+lenght);
				        			if(j%2 == 1)
				        			{
				        				td0 = 'odd';
				        			}
				        			else
				        			{
				        				td0 = 'even';
				        			}
				        			
				        			numTotalAMObjPlus = numTotalAMObjPlus + parseInt(allTDInOneRow[5].substring(allTDInOneRow[5].indexOf(">")+1,allTDInOneRow[5].indexOf("</")));
				        			var insertStr = 
				        				"<tr class="+td0+">" +
				        					"<td class='product-title'>"+allTDInOneRow[0]+"</td>" +
				        					"<td class='num-pallets'>"+allTDInOneRow[1]+"</td>" +
				        					"<td class='Strength'>"+allTDInOneRow[2]+"</td>" +
				        					"<td class='equals'>"+allTDInOneRow[4]+"</td>" +
				        					"<td class='price-per-pallet'>"+allTDInOneRow[5]+"</td>" +
				        				"</tr>";
				        			$("#ack-order-table tr:eq(" + (j) + ")").after(insertStr);
				        		}
				        		numTotalAMObjPlusIndex = j;
				        	}
				        	
				        	insertStr =  "<tr align='right'><td colspan='5'>Total(SGD):"+numTotalAMObjPlus+"</td><tr>";
				        	$("#ack-order-table tr:eq(" + (numTotalAMObjPlusIndex) + ")").after(insertStr);
				        	
				        	
				        	//remove current used cookie
				        	var exp = new Date();
			        	    exp.setTime(exp.getTime() - 1);
				        	document.cookie = "TABLE_VALUES" + "=" + x1 + ";expires=" + exp.toGMTString();
				        }
				    }
				}
		)
		
		function submit() 
		{
			location.href = '/success';
		}
		
		function setDTime(obj){
			if(obj==0){
				document.getElementById("D_Time").style.display="none";
			} else {
				document.getElementById("D_Time").style.display="";
			}
		}
</script>
</body>
</html>


